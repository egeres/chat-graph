<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chats</title>
    <link rel="stylesheet" href="style_b.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/split.js/1.5.11/split.min.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/@shopify/draggable@1.0.0-beta.8/lib/draggable.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.12.0/d3.js"></script>
</head>
<body>
    
    <div class="container_global">

        <div id="panel_names">
            <div class="row_name"><div class="spann"></div>AAAaaaaaaaaaaaabbbbbbaa</div>
            <div class="row_name"><div class="spann"></div>AAAaaaaaaaaaaaaaa</div>
            <div class="row_name"><div class="spann"></div>BBB jh ash </div>
            <div class="row_name"><div class="spann"></div>CCC</div>
            <div class="row_name"><div class="spann"></div>DDD</div>

            <!-- <div class="row_name"><div class="spann"></div>   <div style="overflow: hidden;white-space: nowrap ;" >aabbbbb  b b bb bbbbaa</div>   </div>
            <div class="row_name"><div class="spann"></div>   <div style="overflow: hidden;white-space: nowrap ;" >aabbbbb  b b bb bbbbaa</div>   </div>
            <div class="row_name"><div class="spann"></div>   <div style="overflow: hidden;white-space: nowrap ;" >aabbbbb  b b bb bbbbaa</div>   </div>
            <div class="row_name"><div class="spann"></div>   <div style="overflow: hidden;white-space: nowrap ;" >aabbbbb  b b bb bbbbaa</div>   </div>
            <div class="row_name"><div class="spann"></div>   <div style="overflow: hidden;white-space: nowrap ;" >aabbbbb  b b bb bbbbaa</div>   </div> -->
        
            <!-- <div class="row_name"><div class="spann"></div>  </div>
            <div class="row_name"><div class="spann"></div>  </div>
            <div class="row_name"><div class="spann"></div>  </div>
            <div class="row_name"><div class="spann"></div>  </div>
            <div class="row_name"><div class="spann"></div>  </div> -->
        
            <!-- <div class="row_name">jdjdjdj djdjd djd a</div>
            <div class="row_name">jdjdjdj djdjd djd a</div>
            <div class="row_name">jdjdjdj djdjd djd a</div>
            <div class="row_name">jdjdjdj djdjd djd a</div>
            <div class="row_name">jdjdjdj djdjd djd a</div> -->

            <!-- <div class="row_name"><div class="spann"></div>jdjdjdj djdjd djd a</div>
            <div class="row_name"><div class="spann"></div>jdjdjdj djdjd djd a</div>
            <div class="row_name"><div class="spann"></div>jdjdjdj djdjd djd a</div>
            <div class="row_name"><div class="spann"></div>jdjdjdj djdjd djd a</div>
            <div class="row_name"><div class="spann"></div>jdjdjdj djdjd djd a</div> -->

            <!-- <div class="row_name">
                <div class="spann"></div>
                <div class="spann"></div>
                <div class="spann"></div>
            </div> -->
        </div>

        <div id="panel_histories">
            <!-- <div id="draggablebar"></div> -->

            <!-- <ol>
                <li>zzzxczc</li>
                <li>zzzxczc</li>
                <li>zzzxczc</li>
                <li>zzzxczc</li>
                <li>zzzxczc</li>
                <li>zzzxczc</li>
                <li>zzzxczc</li>
                <li>zzzxczc</li>
                <li>zzzxczc</li>
                <li>zzzxczc</li>
                <li>zzzxczc</li>
                <li>zzzxczc</li>
                <li>zzzxczc</li>
                <li>zzzxczc</li>
            </ol> -->

            <div class="row_graph"></div>
            <div class="row_graph">a</div>
            <div class="row_graph">vvv</div>
            <div class="row_graph">c</div>
            
        </div>

    </div>
</body>

<script>
    Split(['#panel_names', '#panel_histories'], {
        sizes: [18, 75],
        // minSize: [50, 800],
        minSize: [10, 10],
        gutterSize: 5,
    });

    var listWithHandle = document.getElementById("panel_names");

    Sortable.create(listWithHandle, {
        // sort: false,
        handle: '.spann',
        animation: 200
    });


    function test_graph() {
        

        var square_x      = 10;
        var square_y      = 60;
        var square_margin = 0;
        // var margin_1_y      = 1;

        // var separation      = 1;
        // var margin_streams  = 5;
        // var index = 0;

        function getBaseLog(x, y) {
            return Math.log(y) / Math.log(x);
        }

        var svg = d3.select(
            // document.getElementById("panel_histories").firstChild
            document.getElementById("panel_histories").firstElementChild
            // document.getElementById("panel_histories")
        ).append("svg");

        // width  = chartDiv.offsetWidth;
        // height = chartDiv.offsetHeight;
        width  = 300;
        height = 60;
        svg.attr("width", width).attr("height", height);
        var g = svg.append("g").attr("transform", "translate(0, 0)");

        // g.selectAll("foo").data(single_chat_history.chat_messages_1).enter().append("rect")
        g.selectAll("foo").data([0,80,0,100, 1, 1, 3, 4, 6, 8, 0, 0 ,0 , 0,5,6,4,3,5,7,78,4,5]).enter().append("rect")
            .attr("x", function(d, i) { return width - (i + 1) * (square_x+square_margin); } )
            // .attr("y", function(d, i) { return separation + i * (square_size+separation) + index *( margin_streams + 12 * (square_size+separation)); })
            // .attr("y", function(d, i) { return index *( square_1_y+margin_1_y); })
            .attr("y", function(d, i) { return 0; })
            .attr("width" , square_x)
            .attr("height", square_y)
            // .attr("fill", function(d, i) {  return d3.interpolateYlOrRd(scall(d))} );
            .attr("fill", function(d, i) {  return d3.interpolateYlOrRd( 1 - getBaseLog(500, d) )} ); // logaritmic scale
    }

    test_graph();

</script>
</html>